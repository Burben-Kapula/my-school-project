<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dice Roll Game</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: #121212; /* Темний фон */
            color: #e0e0e0; /* Світлий текст */
            font-family: 'Arial', sans-serif; /* Простий шрифт */
            margin: 0;
        }
        .wrapper {
            text-align: center;
            border: 1px solid #333; /* Темна рамка */
            padding: 20px;
            border-radius: 10px;
            background: #1e1e1e; /* Темно-сірий фон */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5); /* Тінь для об'єму */
        }
        h1 {
            font-size: 2rem;
            margin-bottom: 20px;
            color: #ffffff; /* Білий текст */
        }
        input {
            margin: 10px 0;
            padding: 10px;
            font-size: 1rem;
            border: 1px solid #444; /* Темна рамка */
            border-radius: 5px;
            background: #2a2a2a; /* Темний фон */
            color: #e0e0e0; /* Світлий текст */
            text-align: center;
        }
        input::placeholder {
            color: #888; /* Світло-сірий текст для підказок */
        }
        .dice-area {
            display: inline-block;
            margin: 20px;
        }
        .dice-area p {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #b0b0b0; /* Світло-сірий текст */
        }
        img {
            width: 100px;
            height: 100px;
            border: 1px solid #444; /* Темна рамка */
            border-radius: 10px;
            background: #2a2a2a; /* Темний фон */
        }
        button {
            margin-top: 15px;
            padding: 12px 20px;
            font-size: 1rem;
            border: none;
            border-radius: 5px;
            background: #007bff; /* Синій фон */
            color: #ffffff; /* Білий текст */
            cursor: pointer;
            text-transform: uppercase;
            font-weight: bold;
            transition: background 0.3s ease;
        }
        button:hover {
            background: #0056b3; /* Темніший синій при наведенні */
        }
        #loose {
            font-size: 1.5rem;
            margin-top: 20px;
            color: #ff5252; /* Червоний текст для повідомлення про поразку */
        }
        #message {
            font-size: 1.2rem;
            margin-top: 10px;
            color: #ffcc00; /* Жовтий текст для повідомлень */
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
    <div class="wrapper">
        <h1>Enter names for 4 players</h1>
        <input type="text" id="player1" placeholder="Player 1 Name"><br>
        <input type="text" id="player2" placeholder="Player 2 Name"><br>
        <input type="text" id="player3" placeholder="Player 3 Name"><br>
        <input type="text" id="player4" placeholder="Player 4 Name"><br>
        <button id="start">Start Game</button>
        <button id="reset">Reset Game</button>
        <button id="roll">Roll</button>
        <h1 id="loose"></h1>
        <h1 id="main-text">Arcade Dice Game</h1>
        <div id="message"></div>
        <div class="dice-area">
            <p id="player-name1"></p>
            <img>
            <p id="score1"></p>
        </div>
        <div class="dice-area">
            <p id="player-name2"></p>
            <img>
            <p id="score2"></p>
        </div>
        <div class="dice-area">
            <p id="player-name3"></p>
            <img>
            <p id="score3"></p>
        </div>
        <div class="dice-area">
            <p id="player-name4"></p>
            <img>
            <p id="score4"></p>
        </div>
    </div>
    <script>
        const resetButton = document.querySelector("#reset");
        const startButton = document.querySelector("#start");
        const rollButton = document.querySelector("#roll");
        const message = document.querySelector("#message");

        resetButton.onclick = resetGame;
        startButton.onclick = startGame;
        rollButton.onclick = function () {
            playGame();
            loose(); // Викликаємо функцію loose після кожного натискання "Roll"
        };

        document.querySelector("#player1").oninput = saveNames;
        document.querySelector("#player2").oninput = saveNames;
        document.querySelector("#player3").oninput = saveNames;
        document.querySelector("#player4").oninput = saveNames;

        let firstRandomNumber, secondRandomNumber, thirdRandomNumber, fourthRandomNumber;

        const ListFirstPlayer = [];
        const ListSecondPlayer = [];
        const ListThirdPlayer = [];
        const ListFourthPlayer = []; // Додано оголошення

        function loose() {
            const totalScorePlayer1 = ListFirstPlayer.reduce((sum, current) => sum + current, 0);
            const totalScorePlayer2 = ListSecondPlayer.reduce((sum, current) => sum + current, 0);
            const totalScorePlayer3 = ListThirdPlayer.reduce((sum, current) => sum + current, 0);
            const totalScorePlayer4 = ListFourthPlayer.reduce((sum, current) => sum + current, 0);
            const numberToCheck = 1;
            const scorePlayer1 = document.querySelector("#score1");
            const scorePlayer2 = document.querySelector("#score2");
            const scorePlayer3 = document.querySelector("#score3");
            const scorePlayer4 = document.querySelector("#score4");
            const looseText = document.querySelector("#loose");

            let losingPlayer = null;

            if (ListFirstPlayer.includes(numberToCheck)) {
                losingPlayer = "Player 1";
            } else if (ListSecondPlayer.includes(numberToCheck)) {
                losingPlayer = "Player 2";
            } else if (ListThirdPlayer.includes(numberToCheck)) {
                losingPlayer = "Player 3";
            } else if (ListFourthPlayer.includes(numberToCheck)) {
                losingPlayer = "Player 4";
            }

            if (losingPlayer) {
                looseText.textContent = `${losingPlayer} LOSE!`;
            } else {
                looseText.textContent = "No player lose!";
            }

            // Оновлення тексту для всіх гравців
            scorePlayer1.innerText = `Score: ${totalScorePlayer1}`;
            scorePlayer2.innerText = `Score: ${totalScorePlayer2}`;
            scorePlayer3.innerText = `Score: ${totalScorePlayer3}`;
            scorePlayer4.innerText = `Score: ${totalScorePlayer4}`;
        }

        function startGame() {
            const player1Name = document.querySelector("#player1").value.trim();
            const player2Name = document.querySelector("#player2").value.trim();
            const player3Name = document.querySelector("#player3").value.trim();
            const player4Name = document.querySelector("#player4").value.trim();

            if (!player1Name || !player2Name || !player3Name || !player4Name) {
                message.innerText = "Please enter names for all 4 players!";
                return;
            }

            saveNames();

            document.querySelector("#player-name1").textContent = player1Name;
            document.querySelector("#player-name2").textContent = player2Name;
            document.querySelector("#player-name3").textContent = player3Name;
            document.querySelector("#player-name4").textContent = player4Name;

            playGame();
        }

        function resetGame() {
            localStorage.clear();
            location.reload();
        }

        function playGame() {
            // Генерація випадкових чисел для кожного гравця
            firstRandomNumber = Math.floor(Math.random() * 6) + 1;
            secondRandomNumber = Math.floor(Math.random() * 6) + 1;
            thirdRandomNumber = Math.floor(Math.random() * 6) + 1;
            fourthRandomNumber = Math.floor(Math.random() * 6) + 1;

            // Встановлення зображень кубиків
            const firstDiceImage = "images/dice" + firstRandomNumber + ".png";
            document.querySelectorAll("img")[0].setAttribute("src", firstDiceImage);

            const secondDiceImage = "images/dice" + secondRandomNumber + ".png";
            document.querySelectorAll("img")[1].setAttribute("src", secondDiceImage);

            const thirdDiceImage = "images/dice" + thirdRandomNumber + ".png";
            document.querySelectorAll("img")[2].setAttribute("src", thirdDiceImage);

            const fourthDiceImage = "images/dice" + fourthRandomNumber + ".png";
            document.querySelectorAll("img")[3].setAttribute("src", fourthDiceImage);

            // Додавання результатів у списки
            ListFirstPlayer.push(firstRandomNumber);
            ListSecondPlayer.push(secondRandomNumber);
            ListThirdPlayer.push(thirdRandomNumber);
            ListFourthPlayer.push(fourthRandomNumber);

            // Логування результатів у консоль
            console.log("Player 1 rolled:", firstRandomNumber);
            console.log("Player 2 rolled:", secondRandomNumber);
            console.log("Player 3 rolled:", thirdRandomNumber);
            console.log("Player 4 rolled:", fourthRandomNumber);

            console.log("Player 1 history:", ListFirstPlayer);
            console.log("Player 2 history:", ListSecondPlayer);
            console.log("Player 3 history:", ListThirdPlayer);
            console.log("Player 4 history:", ListFourthPlayer);
        }

        function saveNames() {
            const player1Name = document.querySelector("#player1").value.trim();
            const player2Name = document.querySelector("#player2").value.trim();
            const player3Name = document.querySelector("#player3").value.trim();
            const player4Name = document.querySelector("#player4").value.trim();

            localStorage.setItem("player1Name", player1Name);
            localStorage.setItem("player2Name", player2Name);
            localStorage.setItem("player3Name", player3Name);
            localStorage.setItem("player4Name", player4Name);
        }
    </script>
</body>
</html>